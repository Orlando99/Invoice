"use strict";invoicesUnlimited.factory("creditNoteFactory",["userFactory","creditNoteItemFactory","commentFactory","paymentFactory",function(e,t,i,o){return e.entity.length?function(e,n){if(e){var s;if("listCreditNotes"==n.operation){if(s=["creditNumber","creditNoteDate","reference","total","remainingCredits","status"],m=e.get("customer")){var r=["displayName","salutation"];setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:r}),this.customer=m}}else if("getCreditNote"===n.operation){s=["customer","creditNoteDate","creditNumber","status","subTotal","total","notes","terms","reference"];var a=e.get("creditNoteItems");a&&(a=a.map(function(e){return new t(e)}),this.creditItems=a)}else if("sendReceipt"==n.operation){s=["remainingCredits","creditReceipt","customerEmails","emailReceipt"],(m=e.get("customer"))&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m);var c=e.get("organization");c&&(setObjectOperations({object:c,fieldName:void 0,parent:void 0,fields:["name"]}),this.organization=c)}else if("details"==n.operation){s=["creditNumber","creditReceipt","remainingCredits"];var l=e.get("refunds");l&&(l=l.map(function(e){return new o(e)}),this.payments=l);var u=e.get("comments");u&&(u=u.map(function(e){return new i(e)}),this.comments=u)}else if("apply2Invoice"==n.operation)s=["remainingCredits","creditsUsed","creditNumber"];else if("customerCredit"==n.operation){s=["creditNumber","remainingCredits"];var m=e.get("customer");m&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m)}else"customerBalance"==n&&(s=["remainingCredits","creditsUsed","creditNumber"]);setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:s}),this.entity=e}}:(console.log("User not logged in"),"undefined")}]),invoicesUnlimited.factory("creditNoteItemFactory",["userFactory",function(e){return e.entity.length?function(e){if(e){var t=["item","tax","quantity","amount","ACL"];setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:t}),this.entity=e}}:(console.log("User not logged in"),"undefined")}]),invoicesUnlimited.factory("currencyFactoryService",["userFactory",function(e){if(!e.entity.length)return console.log("User not logged in"),{};var t=["currencySymbol","decimalPlace","format","title","exchangeRate"];return function(e){setObjectOperations({object:e,fields:t}),this.entity=e}}]),invoicesUnlimited.factory("estimateFactory",["userFactory","estimateItemFactory","commentFactory",function(e,t,i){return e.entity.length?function(e,o){if(e){var n;if("listEstimates"==o.operation)n=["estimateNumber","estimateDate","totalAmount","referenceNumber","status"],(c=e.get("customer"))&&(l=["displayName","salutation"],setObjectOperations({object:c,fieldName:void 0,parent:void 0,fields:l}),this.customer=c);else if("getEstimate"==o.operation){n=["customer","estimateDate","referenceNumber","estimateNumber","status","adjustments","estimateFiles","discountType","discounts","shippingCharges","subTotal","totalAmount","notes","termsConditions","salesPerson","customFields"];var s=e.get("estimateItems");s&&(s=s.map(function(e){return new t(e)}),this.estimateItems=s)}else if("sendReceipt"==o.operation){n=["totalAmount","estimateReceipt","customerEmails","emailReceipt"],(c=e.get("customer"))&&(setObjectOperations({object:c,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=c);var r=e.get("organization");r&&(setObjectOperations({object:r,fieldName:void 0,parent:void 0,fields:["name"]}),this.organization=r)}else if("details"==o.operation){n=["estimateNumber","estimateReceipt"];var a=e.get("comments");a&&(a=a.map(function(e){return new i(e)}),this.comments=a);var c=e.get("customer");if(c){var l=["displayName","salutation"];setObjectOperations({object:c,fieldName:void 0,parent:void 0,fields:l}),this.customer=c}var u=e.get("estimateFiles");u&&(this.attachments=u)}setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:n}),this.entity=e}}:(console.log("User not logged in"),"undefined")}]),invoicesUnlimited.factory("estimateItemFactory",["userFactory",function(e){return e.entity.length?function(e){if(e){var t=["item","tax","quantity","amount","discount","ACL"];setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:t}),this.entity=e}}:(console.log("User not logged in"),"undefined")}]),invoicesUnlimited.factory("expenseCategoryFactory",["userFactory",function(e){return e.entity.length?function(e){if(e){var t=["color","name","notes"];setObjectOperations({object:e,fields:t}),this.entity=e}}:(console.log("User not logged in"),{})}]),invoicesUnlimited.factory("expenseFactory",["userFactory",function(e){function t(e,t){if(e){var i;if("listExpenses"==t.operation){if(i=["expanseDate","category","referenceNumber","status","amount"],n=e.get("customer")){s=["displayName","salutation"];setObjectOperations({object:n,fieldName:void 0,parent:void 0,fields:s}),this.customer=n}}else if("getExpense"==t.operation)i=["customer","tax","amount","referenceNumber","category","expanseDate","notes","expenseFiles","billable","status","currency"];else if("getCustomerExpenses"==t.operation)i=["customer","tax","amount","category","expanseDate"];else if("details"==t.operation){if(i=["category","expanseDate","amount","referenceNumber","notes","expenseFiles","status","currency"],n=e.get("customer")){s=["displayName","salutation"];setObjectOperations({object:n,fieldName:void 0,parent:void 0,fields:s}),this.customer=n}var o=e.get("expenseFiles");o&&(this.attachments=o)}else if("summary"==t.operation){i=["category","amount","expanseDate"];var n=e.get("customer");if(n){var s=["displayName","salutation"];setObjectOperations({object:n,fieldName:void 0,parent:void 0,fields:s}),this.customer=n}}setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:i}),this.entity=e}}return e.entity.length?t:(console.log("User not logged in"),t)}]),invoicesUnlimited.factory("invoiceFactory",["userFactory","invoiceItemFactory","commentFactory","paymentFactory",function(e,t,i,o){function n(e,n){if(e){var s;if("listInvoices"===n.operation){if(s=["invoiceNumber","invoiceDate","dueDate","total","balanceDue","status","poNumber"],m=e.get("customer")){var r=["displayName","salutation"];setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:r}),this.customer=m}}else if("getInvoice"===n.operation)s=["customer","invoiceDate","dueDate","invoiceNumber","status","invoiceFiles","invoiceInfo","adjustments","discountType","discounts","shippingCharges","balanceDue","subTotal","total","notes","terms","poNumber","salesPerson","lateFee","customFields","paymentTerms"],(u=e.get("invoiceItems"))&&(u=u.map(function(e){return new t(e)}),this.invoiceItems=u);else if("sendReceipt"==n.operation){s=["balanceDue","invoiceReceipt","customerEmails","emailReceipt"],(m=e.get("customer"))&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m);var a=e.get("organization");a&&(setObjectOperations({object:a,fieldName:void 0,parent:void 0,fields:["name"]}),this.organization=a)}else if("details"==n.operation){s=["invoiceNumber","invoiceReceipt","invoiceInfo","balanceDue","creditApplied"];var c=e.get("comments");c&&(c=c.map(function(e){return new i(e)}),this.comments=c),(d=e.get("payment"))&&(d=d.map(function(e){return new o(e)}),this.payments=d);var l=e.get("invoiceFiles");l&&(this.attachments=l)}else if("summary"==n.operation)s=["invoiceDate","dueDate","status","balanceDue","lateFee","total"];else if("salesByCustomerReport"==n.operation)s=["invoiceNumber","total"],(m=e.get("customer"))&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m);else if("salesByItemReport"==n.operation){s=["invoiceNumber"];var u=e.get("invoiceItems");u&&(u=u.map(function(e){return new t(e)}),this.invoiceItems=u)}else if("customerBalance"==n.operation)s=["invoiceNumber","balanceDue"],(m=e.get("customer"))&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m);else if("invoiceAging"==n.operation)s=["invoiceNumber","balanceDue","invoiceDate","lateFee"],(m=e.get("customer"))&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m);else if("paymentsReceived"==n.operation){s=["invoiceNumber","invoiceDate"];var m=e.get("customer");m&&(setObjectOperations({object:m,fieldName:void 0,parent:void 0,fields:["displayName","salutation"]}),this.customer=m);var d=e.get("payment");d&&(d=d.map(function(e){return new o(e)}),this.payments=d)}setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:s}),this.entity=e}}return e.entity.length?n:(console.log("User not logged in"),n)}]),invoicesUnlimited.factory("invoiceItemFactory",["userFactory",function(e){function t(e){if(e){var t=["item","tax","quantity","amount","discount","ACL"];setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:t}),this.entity=e}}return e.entity.length?t:(console.log("User not logged in"),t)}]),invoicesUnlimited.factory("itemFactory",["userFactory",function(e){if(!e.entity.length)return console.log("User not logged in"),{};var t=["title","rate","itemDescription","expanseId"],i=["objectId","title","type","value","compound"];return function(e){setObjectOperations({object:e,fields:t});var o=e.get("tax");o&&(setObjectOperations({object:o,fieldName:void 0,parent:void 0,fields:i}),this.tax=o),this.entity=e}}]),invoicesUnlimited.factory("lateFeeFactory",["userFactory",function(e){if(!e.entity.length)return console.log("User not logged in"),"undefined";return function(e){if(e){var t=["name","price","type"];setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:t}),this.entity=e}}}]),invoicesUnlimited.factory("paymentFactory",["userFactory",function(e){function t(e){if(e){var t=["date","reference","mode","amount","notes","deleted","lastFourDigits"];setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:t}),this.entity=e}}return e.entity.length?t:(console.log("User not logged in"),t)}]),invoicesUnlimited.factory("projectFactory",["userFactory","taskFactory","staffFactory",function(e,t,i){return e.entity.length?function(e,o){if(e){var n;if("listProjects"==o.operation){n=["projectName","projectDescription","billingMethod","projectBillingAmount"];var s=e.get("customer");if(s){s.get("displayName");var r=["displayName","salutation"];setObjectOperations({object:s,fieldName:void 0,parent:void 0,fields:r}),this.customer=s}}else if("getProject"==o.operation)n=["customer","projectName","projectDescription","billingMethod","projectBillingAmount","hasBudget","budgetType","projectBudgetHours","projectBudgetCost"],(a=e.get("tasks"))&&(a=a.map(function(e){return new t(e)}),this.tasks=a),(c=e.get("users"))&&(c=c.map(function(e){return new i(e)}),this.users=c),(l=e.get("timeSheets"))&&(this.timesheets=l);else if("details"==o.operation){n=["customer","projectName","projectDescription","billingMethod","projectBillingAmount","hasBudget","budgetType","projectBudgetHours","projectBudgetCost"];var a=e.get("tasks");a&&(a=a.map(function(e){return new t(e)}),this.tasks=a);var c=e.get("users");c&&(c=c.map(function(e){return new i(e)}),this.users=c);var l=e.get("timeSheets");l&&(this.timesheets=l)}setObjectOperations({object:e,fieldName:void 0,parent:void 0,fields:n}),this.entity=e}}:(console.log("User not logged in"),"undefined")}]),invoicesUnlimited.factory("projectUserFactory",["userFactory","appFields",function(e,t){var i=e;if(!i.entity.length)return{};var o={entities:[]};o.clearAllOnLogOut=function(){if(i.entity.length)throw"User should be logged out first!";o.entities.length=0},o.prepareNew=function(){var e=new(Parse.Object.extend("ProjectUser"));return setObjectOperations({object:e,fields:t.projectUser}),e},o.saveNew=function(e,i){return e.save(i||null).then(function(e){return setObjectOperations({object:e,fields:t.projectUser}),o.entities.push(e),e},function(e){console.log(e.message)})},o.createNew=function(e){var t=o.prepareNew();return o.saveNew(t,e)};var n=function(){var e=new Parse.Query("ProjectUser");e.equalTo("userID",i.entity[0]);var n=new Parse.Query("ProjectUser");return n.equalTo("organization",i.entity[0].get("selectedOrganization")),Parse.Query.or(e,n).find().then(function(e){return o.entities=e.map(function(e){return setObjectOperations({object:e,fields:t.projectUser}),e}),o.entities},function(e){console.log(e.message)})};return o.getAll=function(e){return e&&e.reload||!e&&!o.entities.length?n():Parse.Promise.as(o.entities)},o.getByUsername=function(e){var t=new Parse.Query("ProjectUser");return t.equalTo("userName",e),t.first()},o}]),invoicesUnlimited.factory("staffFactory",["userFactory","projectUserFactory","appFields",function(e,t,i){if(!e.entity.length)return console.log("User not logged in"),{};var o=["staffHours"];return function(e){setObjectOperations({object:e,fields:o}),this.user=e.get("chosenUser"),setObjectOperations({object:this.user,fields:i.projectUser}),this.entity=e}}]),invoicesUnlimited.factory("taskFactory",["userFactory",function(e){if(!e.entity.length)return console.log("User not logged in"),{};var t=["taskName","taskHours","taskDescription","billedHours","taskCost"];return function(e){setObjectOperations({object:e,fields:t}),this.entity=e}}]);